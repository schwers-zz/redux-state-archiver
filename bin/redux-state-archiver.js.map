{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///redux-state-archiver.js","webpack:///webpack/bootstrap aa2b6bd9fa18f2d08a9f","webpack:///./src/localStorageAvailable.js","webpack:///external \"js-cookie\"","webpack:///external \"react\"","webpack:///external \"react-redux\"","webpack:///external \"reselect\"","webpack:///./src/StateArchiver.es6.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","p","s","localStorageAvailable","localStorage","setItem","FEATURE_TEST_LOCAL_STORAGE","getItem","e","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__esModule","defineProperty","get","__WEBPACK_IMPORTED_MODULE_1_react_redux__","__WEBPACK_IMPORTED_MODULE_1_react_redux___default","__WEBPACK_IMPORTED_MODULE_2_reselect__","__WEBPACK_IMPORTED_MODULE_2_reselect___default","__WEBPACK_IMPORTED_MODULE_3_js_cookie__","__WEBPACK_IMPORTED_MODULE_3_js_cookie___default","__WEBPACK_IMPORTED_MODULE_4__localStorageAvailable__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","T","a","PropTypes","StateArchiver","_React$Component","_this","getPrototypeOf","canArchive","tester","nextProps","archiveDiff","buildDiffFromNextProps","archiver","diff","datum","keys","haveDiff","Component","propTypes","object","isRequired","func","makeStateArchiver","_len","arguments","funcs","Array","_key","pop","combiner","selectorCombiner","apply","undefined","selector","bind","applyArchiver","persistCookieKeyValue","remove","set","cookieArchive","makeCookieArchiver","_len2","_key2","push","persistLocalStorageKeyValue","localStorageArchive","makeLocalStorageArchiver","_len3","_key3"],"mappings":"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","file":"redux-state-archiver.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-cookie\"), require(\"react\"), require(\"react-redux\"), require(\"reselect\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"js-cookie\", \"react\", \"react-redux\", \"reselect\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"redux-state-archiver.js\"] = factory(require(\"js-cookie\"), require(\"react\"), require(\"react-redux\"), require(\"reselect\"));\n\telse\n\t\troot[\"redux-state-archiver.js\"] = factory(root[\"js-cookie\"], root[\"react\"], root[\"react-redux\"], root[\"reselect\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-cookie\"), require(\"react\"), require(\"react-redux\"), require(\"reselect\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"js-cookie\", \"react\", \"react-redux\", \"reselect\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"redux-state-archiver.js\"] = factory(require(\"js-cookie\"), require(\"react\"), require(\"react-redux\"), require(\"reselect\"));\n\telse\n\t\troot[\"redux-state-archiver.js\"] = factory(root[\"js-cookie\"], root[\"react\"], root[\"react-redux\"], root[\"reselect\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/* harmony export */ exports[\"a\"] = localStorageAvailable;var FEATURE_TEST_LOCAL_STORAGE = 'redux__start__archiver__local__storage__test';\n\t\n\tfunction localStorageAvailable() {\n\t  try {\n\t    if (typeof localStorage !== 'undefined') {\n\t      localStorage.setItem(FEATURE_TEST_LOCAL_STORAGE, 'yes');\n\t      if (localStorage.getItem(FEATURE_TEST_LOCAL_STORAGE) === 'yes') {\n\t        return true;\n\t      }\n\t    }\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t\n\t  return false;\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"js-cookie\");\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"react\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"react-redux\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"reselect\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __WEBPACK_IMPORTED_MODULE_0_react__ && __WEBPACK_IMPORTED_MODULE_0_react__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_0_react__['default'] } : function() { return __WEBPACK_IMPORTED_MODULE_0_react__; }\n\t/* harmony import */ Object.defineProperty(__WEBPACK_IMPORTED_MODULE_0_react___default, 'a', { get: __WEBPACK_IMPORTED_MODULE_0_react___default });\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_redux__ = __webpack_require__(3);\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_redux___default = __WEBPACK_IMPORTED_MODULE_1_react_redux__ && __WEBPACK_IMPORTED_MODULE_1_react_redux__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_1_react_redux__['default'] } : function() { return __WEBPACK_IMPORTED_MODULE_1_react_redux__; }\n\t/* harmony import */ Object.defineProperty(__WEBPACK_IMPORTED_MODULE_1_react_redux___default, 'a', { get: __WEBPACK_IMPORTED_MODULE_1_react_redux___default });\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_reselect__ = __webpack_require__(4);\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_reselect___default = __WEBPACK_IMPORTED_MODULE_2_reselect__ && __WEBPACK_IMPORTED_MODULE_2_reselect__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_2_reselect__['default'] } : function() { return __WEBPACK_IMPORTED_MODULE_2_reselect__; }\n\t/* harmony import */ Object.defineProperty(__WEBPACK_IMPORTED_MODULE_2_reselect___default, 'a', { get: __WEBPACK_IMPORTED_MODULE_2_reselect___default });\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_cookie__ = __webpack_require__(1);\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_cookie___default = __WEBPACK_IMPORTED_MODULE_3_js_cookie__ && __WEBPACK_IMPORTED_MODULE_3_js_cookie__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_3_js_cookie__['default'] } : function() { return __WEBPACK_IMPORTED_MODULE_3_js_cookie__; }\n\t/* harmony import */ Object.defineProperty(__WEBPACK_IMPORTED_MODULE_3_js_cookie___default, 'a', { get: __WEBPACK_IMPORTED_MODULE_3_js_cookie___default });\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__localStorageAvailable__ = __webpack_require__(0);\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\tvar T = /* harmony import */__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes;\n\tvar StateArchiver = function (_React$Component) {\n\t  _inherits(StateArchiver, _React$Component);\n\t\n\t  function StateArchiver(props) {\n\t    _classCallCheck(this, StateArchiver);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(StateArchiver).call(this, props));\n\t\n\t    _this.canArchive = props.tester ? props.tester() : true;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(StateArchiver, [{\n\t    key: 'componentWillUpdate',\n\t    value: function componentWillUpdate(nextProps) {\n\t      if (this.canArchive) {\n\t        var archiveDiff = this.buildDiffFromNextProps(nextProps);\n\t        if (archiveDiff) {\n\t          nextProps.archiver(archiveDiff);\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'buildDiffFromNextProps',\n\t    value: function buildDiffFromNextProps(nextProps) {\n\t      var diff = {};\n\t      var datum = nextProps.datum;\n\t\n\t      var keys = Object.keys(datum);\n\t      var haveDiff = false;\n\t\n\t      for (var i = 0; i < keys.length; i++) {\n\t        var key = keys[i];\n\t        var value = datum[key];\n\t\n\t        // simple equaility comparison, matches the immutability constraints from redux / reselect\n\t        if (value != this.props.datum[key]) {\n\t          diff[key] = value;\n\t          haveDiff = true;\n\t        }\n\t      }\n\t\n\t      if (haveDiff) {\n\t        return diff;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return false;\n\t    }\n\t  }]);\n\t\n\t  return StateArchiver;\n\t}(/* harmony import */__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);\n\t/* harmony export */ Object.defineProperty(exports, \"StateArchiver\", {configurable: false, enumerable: true, get: function() { return StateArchiver; }});\n\t\n\t/*\n\tmakeStateArchiver returns a React Component to be used in a subtree of\n\t<Provdider /> from react-redux. It will listen to your redux state and archive that data\n\twhen it changes.\n\t\n\tThe arguments to makeStateArchiver are simliar to createSelector, pass in an array\n\tof selectors that extract the data you from state you wish to serialize.\n\t\n\te.g. ```javascript\n\tconst themeSelector = (state) => return state.theme;\n\t```\n\t\n\tAfter your selectors, pass in a 'combiner' to merge the data from your selectors\n\tinto an object that will represent the overall state of data you wish to serialize;\n\t\n\te.g. ```javascript\n\tconst combiner = (theme) => ({ theme });\n\t```\n\t\n\tFinally pass in a state archiver, a function that takes an object, and persists it\n\tin some manner. You probably will never pass this, as most apps can use the helper functions\n\t`makeCookieArchiver` or `makeLocalStorageArchiver`; Note: Your archiver should be able\n\tto deal with persisting the diff of what's output from your combiner.\n\t\n\tFull example: ```javascript\n\timport React from 'react';\n\timport { Provider } from 'react-redux';\n\timport { makeCookieArchiver } from '@r/redux-state-archiver';\n\timport { UrlSync } from '@r/platform/components';\n\timport App from './src/App';\n\t\n\tconst themeSelector = (state) => return state.theme;\n\tconst compactSelector = (state) => return state.compact;\n\tconst combiner = (theme, compact) => ({ theme, compact });\n\tconst CookieSync = makeCookieArchiver(\n\t  themeSelector,\n\t  compactSelector,\n\t  combiner,\n\t);\n\t\n\tconst renderApp = (store) => (\n\t  <Provider store={ store }>\n\t    <App />\n\t    <UrlSync />\n\t    <CookieSynce />\n\t  </Provider>\n\t);\n\t\n\t```\n\t*/\n\tStateArchiver.propTypes = {\n\t  datum: T.object.isRequired,\n\t  archiver: T.func.isRequired,\n\t  tester: T.func\n\t};\n\tvar makeStateArchiver = function makeStateArchiver() {\n\t  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n\t    funcs[_key] = arguments[_key];\n\t  }\n\t\n\t  var tester = funcs.pop();\n\t  var archiver = funcs.pop();\n\t  var combiner = funcs.pop();\n\t\n\t  if (!combiner) {\n\t    // we don't have a tester, shuffle things around\n\t    combiner = archiver;\n\t    archiver = tester;\n\t  }\n\t\n\t  var selectorCombiner = function selectorCombiner() {\n\t    return { datum: combiner.apply(undefined, arguments), archiver: archiver, tester: tester };\n\t  };\n\t\n\t  var selector = /* harmony import */__WEBPACK_IMPORTED_MODULE_2_reselect__[\"createSelector\"].bind()(funcs, selectorCombiner);\n\t  return /* harmony import */__WEBPACK_IMPORTED_MODULE_1_react_redux__[\"connect\"].bind()(selector)(StateArchiver);\n\t};\n\t/* harmony export */ Object.defineProperty(exports, \"makeStateArchiver\", {configurable: false, enumerable: true, get: function() { return makeStateArchiver; }});\n\t\n\tvar applyArchiver = function applyArchiver(datum, archiver) {\n\t  var keys = Object.keys(datum);\n\t  for (var i = 0; i < keys.length; i++) {\n\t    var key = keys[i];\n\t    var value = datum[key];\n\t    archiver(key, value);\n\t  }\n\t};\n\t\n\tvar persistCookieKeyValue = function persistCookieKeyValue(key, value) {\n\t  if (typeof value === 'undefined') {\n\t    /* harmony import */__WEBPACK_IMPORTED_MODULE_3_js_cookie___default.a.remove(key);\n\t  } else {\n\t    /* harmony import */__WEBPACK_IMPORTED_MODULE_3_js_cookie___default.a.set(key, value);\n\t  }\n\t};\n\t\n\tvar cookieArchive = function cookieArchive(datum) {\n\t  applyArchiver(datum, persistCookieKeyValue);\n\t};\n\t\n\tvar makeCookieArchiver = function makeCookieArchiver() {\n\t  for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t    funcs[_key2] = arguments[_key2];\n\t  }\n\t\n\t  funcs.push(cookieArchive);\n\t  return makeStateArchiver.apply(undefined, funcs);\n\t};\n\t/* harmony export */ Object.defineProperty(exports, \"makeCookieArchiver\", {configurable: false, enumerable: true, get: function() { return makeCookieArchiver; }});\n\t\n\tvar persistLocalStorageKeyValue = function persistLocalStorageKeyValue(key, value) {\n\t  return localStorage.setItem(key, value);\n\t};\n\t\n\tvar localStorageArchive = function localStorageArchive(datum) {\n\t  applyArchiver(datum, persistLocalStorageKeyValue);\n\t};\n\t\n\tvar makeLocalStorageArchiver = function makeLocalStorageArchiver() {\n\t  for (var _len3 = arguments.length, funcs = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t    funcs[_key3] = arguments[_key3];\n\t  }\n\t\n\t  funcs.push(localStorageArchive);\n\t  funcs.push(/* harmony import */__WEBPACK_IMPORTED_MODULE_4__localStorageAvailable__[\"a\"]);\n\t  return makeStateArchiver.apply(undefined, funcs);\n\t};\n\t/* harmony export */ Object.defineProperty(exports, \"makeLocalStorageArchiver\", {configurable: false, enumerable: true, get: function() { return makeLocalStorageArchiver; }});\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** redux-state-archiver.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap aa2b6bd9fa18f2d08a9f\n **/","const FEATURE_TEST_LOCAL_STORAGE = 'redux__start__archiver__local__storage__test';\n\nexport default function localStorageAvailable() {\n  try {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(FEATURE_TEST_LOCAL_STORAGE, 'yes');\n      if (localStorage.getItem(FEATURE_TEST_LOCAL_STORAGE) === 'yes') {\n        return true;\n      }\n    }\n  } catch (e) {\n    return false;\n  }\n\n  return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/localStorageAvailable.js\n **/","module.exports = require(\"js-cookie\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"js-cookie\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"react\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"react-redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-redux\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"reselect\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"reselect\"\n ** module id = 4\n ** module chunks = 0\n **/","import React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\n\nimport cookies from 'js-cookie';\nimport localStorageAvailable from './localStorageAvailable';\n\nconst T = React.PropTypes;\nexport class StateArchiver extends React.Component {\n  static propTypes = {\n    datum: T.object.isRequired,\n    archiver: T.func.isRequired,\n    tester: T.func,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.canArchive = props.tester ? props.tester() : true;\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.canArchive) {\n      const archiveDiff = this.buildDiffFromNextProps(nextProps);\n      if (archiveDiff) {\n        nextProps.archiver(archiveDiff);\n      }\n    }\n  }\n\n  buildDiffFromNextProps(nextProps) {\n    const diff = {};\n    const { datum } = nextProps;\n    const keys = Object.keys(datum);\n    let haveDiff = false;\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const value = datum[key];\n\n      // simple equaility comparison, matches the immutability constraints from redux / reselect\n      if (value != this.props.datum[key]) {\n        diff[key] = value;\n        haveDiff = true;\n      }\n    }\n\n    if (haveDiff) {\n      return diff;\n    }\n  }\n\n  render() { return false; }\n}\n\n/*\nmakeStateArchiver returns a React Component to be used in a subtree of\n<Provdider /> from react-redux. It will listen to your redux state and archive that data\nwhen it changes.\n\nThe arguments to makeStateArchiver are simliar to createSelector, pass in an array\nof selectors that extract the data you from state you wish to serialize.\n\ne.g. ```javascript\nconst themeSelector = (state) => return state.theme;\n```\n\nAfter your selectors, pass in a 'combiner' to merge the data from your selectors\ninto an object that will represent the overall state of data you wish to serialize;\n\ne.g. ```javascript\nconst combiner = (theme) => ({ theme });\n```\n\nFinally pass in a state archiver, a function that takes an object, and persists it\nin some manner. You probably will never pass this, as most apps can use the helper functions\n`makeCookieArchiver` or `makeLocalStorageArchiver`; Note: Your archiver should be able\nto deal with persisting the diff of what's output from your combiner.\n\nFull example: ```javascript\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { makeCookieArchiver } from '@r/redux-state-archiver';\nimport { UrlSync } from '@r/platform/components';\nimport App from './src/App';\n\nconst themeSelector = (state) => return state.theme;\nconst compactSelector = (state) => return state.compact;\nconst combiner = (theme, compact) => ({ theme, compact });\nconst CookieSync = makeCookieArchiver(\n  themeSelector,\n  compactSelector,\n  combiner,\n);\n\nconst renderApp = (store) => (\n  <Provider store={ store }>\n    <App />\n    <UrlSync />\n    <CookieSynce />\n  </Provider>\n);\n\n```\n*/\nexport const makeStateArchiver = (...funcs) => {\n  let tester = funcs.pop();\n  let archiver = funcs.pop();\n  let combiner = funcs.pop();\n\n  if (!combiner) {  // we don't have a tester, shuffle things around\n    combiner = archiver;\n    archiver = tester;\n  }\n\n  const selectorCombiner = (...args) => {\n    return { datum: combiner(...args), archiver, tester };\n  };\n\n  const selector = createSelector(funcs, selectorCombiner);\n  return connect(selector)(StateArchiver);\n}\n\nconst applyArchiver = (datum, archiver) => {\n  const keys = Object.keys(datum);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const value = datum[key];\n    archiver(key, value);\n  }\n};\n\nconst persistCookieKeyValue = (key, value) => {\n  if (typeof value === 'undefined') {\n    cookies.remove(key);\n  } else {\n    cookies.set(key, value);\n  }\n};\n\nconst cookieArchive = (datum) => {\n  applyArchiver(datum, persistCookieKeyValue);\n}\n\nexport const makeCookieArchiver = (...funcs) => {\n  funcs.push(cookieArchive);\n  return makeStateArchiver(...funcs);\n}\n\nconst persistLocalStorageKeyValue = (key, value) => localStorage.setItem(key, value);\n\nconst localStorageArchive = (datum) => {\n  applyArchiver(datum, persistLocalStorageKeyValue);\n};\n\nexport const makeLocalStorageArchiver = (...funcs) => {\n  funcs.push(localStorageArchive);\n  funcs.push(localStorageAvailable);\n  return makeStateArchiver(...funcs);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/StateArchiver.es6.js\n **/"],"sourceRoot":""}