!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("js-cookie"),require("react"),require("react-redux"),require("reselect")):"function"==typeof define&&define.amd?define(["js-cookie","react","react-redux","reselect"],r):"object"==typeof exports?exports["redux-state-archiver.js"]=r(require("js-cookie"),require("react"),require("react-redux"),require("reselect")):e["redux-state-archiver.js"]=r(e["js-cookie"],e.react,e["react-redux"],e.reselect)}(this,function(e,r,t,n){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(r.s=5)}([function(e,r,t){"use strict";function n(){try{if("undefined"!=typeof localStorage&&(localStorage.setItem(o,"yes"),"yes"===localStorage.getItem(o)))return!0}catch(e){return!1}return!1}r.a=n;var o="redux__start__archiver__local__storage__test"},function(e,r){e.exports=require("js-cookie")},function(e,r){e.exports=require("react")},function(e,r){e.exports=require("react-redux")},function(e,r){e.exports=require("reselect")},function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var i=t(2),c=i&&i.__esModule?function(){return i["default"]}:function(){return i};Object.defineProperty(c,"a",{get:c});var a=t(3),f=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(f,"a",{get:f});var s=t(4),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};Object.defineProperty(l,"a",{get:l});var p=t(1),d=p&&p.__esModule?function(){return p["default"]}:function(){return p};Object.defineProperty(d,"a",{get:d});var v=t(0),y=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),b=c.a.PropTypes,h=function(e){function r(e){n(this,r);var t=o(this,Object.getPrototypeOf(r).call(this,e));return t.canArchive=e.tester?e.tester():!0,t}return u(r,e),y(r,[{key:"componentWillUpdate",value:function(e){if(this.canArchive){var r=this.buildDiffFromNextProps(e);r&&e.archiver(r)}}},{key:"buildDiffFromNextProps",value:function(e){for(var r={},t=e.datum,n=Object.keys(t),o=!1,u=0;u<n.length;u++){var i=n[u],c=t[i];c!=this.props.datum[i]&&(r[i]=c,o=!0)}return o?r:void 0}},{key:"render",value:function(){return!1}}]),r}(c.a.Component);Object.defineProperty(r,"StateArchiver",{configurable:!1,enumerable:!0,get:function(){return h}}),h.propTypes={datum:b.object.isRequired,archiver:b.func.isRequired,tester:b.func};var g=function(){for(var e=arguments.length,r=Array(e),t=0;e>t;t++)r[t]=arguments[t];var n=r.pop(),o=r.pop(),u=r.pop();u||(u=o,o=n);var i=function(){return{datum:u.apply(void 0,arguments),archiver:o,tester:n}},c=s.createSelector.bind()(r,i);return a.connect.bind()(c)(h)};Object.defineProperty(r,"makeStateArchiver",{configurable:!1,enumerable:!0,get:function(){return g}});var j=function(e,r){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n],u=e[o];r(o,u)}},m=function(e,r){"undefined"==typeof r?d.a.remove(e):d.a.set(e,r)},x=function(e){j(e,m)},_=function(){for(var e=arguments.length,r=Array(e),t=0;e>t;t++)r[t]=arguments[t];return r.push(x),g.apply(void 0,r)};Object.defineProperty(r,"makeCookieArchiver",{configurable:!1,enumerable:!0,get:function(){return _}});var O=function(e,r){return localStorage.setItem(e,r)},k=function(e){j(e,O)},P=function(){for(var e=arguments.length,r=Array(e),t=0;e>t;t++)r[t]=arguments[t];return r.push(k),r.push(v.a),g.apply(void 0,r)};Object.defineProperty(r,"makeLocalStorageArchiver",{configurable:!1,enumerable:!0,get:function(){return P}})}])});
//# sourceMappingURL=redux-state-archiver.js.map